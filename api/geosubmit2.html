

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Geosubmit Version 2 &mdash; Ichnaea 1.4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Ichnaea 1.4 documentation" href="../index.html"/>
        <link rel="up" title="Services API" href="index.html"/>
        <link rel="next" title="Geosubmit (Deprecated)" href="geosubmit.html"/>
        <link rel="prev" title="Region" href="region.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Ichnaea
          

          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Using the Service</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Services API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#api-access-keys">API Access Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#errors">Errors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#apis">APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="geolocate.html">Geolocate</a></li>
<li class="toctree-l3"><a class="reference internal" href="region.html">Region</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Geosubmit Version 2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-definition">Field Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geosubmit.html">Geosubmit (Deprecated)</a></li>
<li class="toctree-l3"><a class="reference internal" href="search.html">Search (Deprecated)</a></li>
<li class="toctree-l3"><a class="reference internal" href="submit.html">Submit (Deprecated)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../import_export.html">Data Import / Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy.html">Installing / Deploying</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Application Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../calculation.html">Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal_api/index.html">Internal Code API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Ichnaea</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Services API</a> &raquo;</li>
      
    <li>Geosubmit Version 2</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/geosubmit2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geosubmit-version-2">
<span id="api-geosubmit-latest"></span><span id="api-geosubmit2"></span><h1>Geosubmit Version 2<a class="headerlink" href="#geosubmit-version-2" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>Purpose</dt>
<dd>Submit data about nearby Bluetooth beacons, cell or WiFi networks.</dd>
</dl>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<p>Geosubmit requests are submitted using a POST request to the URL:</p>
<div class="highlight-python"><div class="highlight"><pre>https://location.services.mozilla.com/v2/geosubmit?key=&lt;API_KEY&gt;
</pre></div>
</div>
<p>There is an earlier <a class="reference internal" href="geosubmit.html#api-geosubmit"><span>Geosubmit (Deprecated)</span></a> version one API, with a slightly
different and less extensive field list.</p>
<p>Geosubmit requests are submitted using a POST request with a JSON body:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[{</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="mi">1405602028568</span><span class="p">,</span>
    <span class="s2">&quot;position&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;latitude&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">22.7539192</span><span class="p">,</span>
        <span class="s2">&quot;longitude&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">43.4371081</span><span class="p">,</span>
        <span class="s2">&quot;accuracy&quot;</span><span class="o">:</span> <span class="mf">10.0</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;altitude&quot;</span><span class="o">:</span> <span class="mf">100.0</span><span class="p">,</span>
        <span class="s2">&quot;altitudeAccuracy&quot;</span><span class="o">:</span> <span class="mf">50.0</span><span class="p">,</span>
        <span class="s2">&quot;heading&quot;</span><span class="o">:</span> <span class="mf">45.0</span><span class="p">,</span>
        <span class="s2">&quot;pressure&quot;</span><span class="o">:</span> <span class="mf">1013.25</span><span class="p">,</span>
        <span class="s2">&quot;speed&quot;</span><span class="o">:</span> <span class="mf">3.6</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;gps&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;connection&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;192.168.1.15&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;bluetoothBeacons&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;macAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;ff:74:27:89:5a:77&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;beacon&quot;</span><span class="p">,</span>
            <span class="s2">&quot;signalStrength&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">110</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;cellTowers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;radioType&quot;</span><span class="o">:</span> <span class="s2">&quot;lte&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mobileCountryCode&quot;</span><span class="o">:</span> <span class="mi">208</span><span class="p">,</span>
            <span class="s2">&quot;mobileNetworkCode&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;locationAreaCode&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;cellId&quot;</span><span class="o">:</span> <span class="mi">12345</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">&quot;asu&quot;</span><span class="o">:</span> <span class="mi">31</span><span class="p">,</span>
            <span class="s2">&quot;primaryScramblingCode&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;serving&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;signalStrength&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">51</span><span class="p">,</span>
            <span class="s2">&quot;timingAdvance&quot;</span><span class="o">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;wifiAccessPoints&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;macAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;01:23:45:67:89:ab&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span>
            <span class="s2">&quot;channel&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;frequency&quot;</span><span class="o">:</span> <span class="mi">2437</span><span class="p">,</span>
            <span class="s2">&quot;radioType&quot;</span><span class="o">:</span> <span class="s2">&quot;802.11n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;signalToNoiseRatio&quot;</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
            <span class="s2">&quot;signalStrength&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">77</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;macAddress&quot;</span><span class="o">:</span> <span class="s2">&quot;23:45:67:89:ab:cd&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}]}</span>
</pre></div>
</div>
</div>
<div class="section" id="field-definition">
<h2>Field Definition<a class="headerlink" href="#field-definition" title="Permalink to this headline">¶</a></h2>
<p>Requests always need to contain a batch of reports. Each report
must contain at least one entry in the <cite>bluetoothBeacons</cite>, <cite>cellTowers</cite> or
<cite>wifiAccessPoints</cite> arrays.</p>
<p>Almost all of the fields are optional. For Bluetooth and WiFi records only
the <cite>macAddress</cite> field is required.</p>
<div class="section" id="global-fields">
<h3>Global Fields<a class="headerlink" href="#global-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>timestamp</dt>
<dd>The time of observation of the data, measured in milliseconds since
the UNIX epoch. Can be omitted if the observation time is very recent.
The age values in each section are relative to this timestamp.</dd>
</dl>
</div>
<div class="section" id="position-fields">
<h3>Position Fields<a class="headerlink" href="#position-fields" title="Permalink to this headline">¶</a></h3>
<p>The position block contains information about where and when the data was
observed.</p>
<dl class="docutils">
<dt>latitude</dt>
<dd>The latitude of the observation (WSG 84).</dd>
<dt>longitude</dt>
<dd>The longitude of the observation (WSG 84).</dd>
<dt>accuracy</dt>
<dd>The accuracy of the observed position in meters.</dd>
<dt>altitude</dt>
<dd>The altitude at which the data was observed in meters above sea-level.</dd>
<dt>altitudeAccuracy</dt>
<dd>The accuracy of the altitude estimate in meters.</dd>
<dt>age</dt>
<dd>The age of the position data (in milliseconds).</dd>
<dt>heading</dt>
<dd>The heading field denotes the direction of travel of the device and is
specified in degrees, where 0° ≤ heading &lt; 360°, counting clockwise
relative to the true north.</dd>
<dt>pressure</dt>
<dd>The air pressure in hPa (millibar).</dd>
<dt>speed</dt>
<dd>The speed field denotes the magnitude of the horizontal component of
the device&#8217;s current velocity and is specified in meters per second.</dd>
<dt>source</dt>
<dd>The source of the position information. If the field is omitted, &#8220;gps&#8221;
is assumed. The term <cite>gps</cite> is used to cover all types of satellite
based positioning systems incl. Galileo and Glonass.
Other possible values are <cite>manual</cite> for a position entered manually into
the system and <cite>fused</cite> for a position obtained from a combination of
other sensors or outside service queries.</dd>
</dl>
</div>
<div class="section" id="bluetooth-beacon-fields">
<h3>Bluetooth Beacon Fields<a class="headerlink" href="#bluetooth-beacon-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>macAddress</dt>
<dd>The address of the BLE beacon.</dd>
<dt>name</dt>
<dd>The name of the BLE beacon.</dd>
<dt>age</dt>
<dd>The number of milliseconds since this Bluetooth beacon was last seen.</dd>
<dt>signalStrength</dt>
<dd>The measured signal strength of the BLE beacon in dBm.</dd>
</dl>
</div>
<div class="section" id="cell-tower-fields">
<h3>Cell Tower Fields<a class="headerlink" href="#cell-tower-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>radioType</dt>
<dd>The type of radio network. One of <cite>gsm</cite>, <cite>wcdma</cite> or <cite>lte</cite>.</dd>
<dt>mobileCountryCode</dt>
<dd>The mobile country code.</dd>
<dt>mobileNetworkCode</dt>
<dd>The mobile network code.</dd>
<dt>locationAreaCode</dt>
<dd>The location area code for GSM and WCDMA networks. The tracking area
code for LTE networks.</dd>
<dt>cellId</dt>
<dd>The cell id or cell identity.</dd>
<dt>age</dt>
<dd>The number of milliseconds since this cell was last seen.</dd>
<dt>asu</dt>
<dd>The arbitrary strength unit indicating the signal strength if a
direct signal strength reading is not available.</dd>
<dt>primaryScramblingCode</dt>
<dd>The primary scrambling code for WCDMA and physical cell id for LTE.</dd>
<dt>serving</dt>
<dd>A value of <cite>1</cite> indicates this as the serving cell, a value of <cite>0</cite>
indicates a neighboring cell.</dd>
<dt>signalStrength</dt>
<dd>The signal strength for this cell network, either the RSSI or RSCP.</dd>
<dt>timingAdvance</dt>
<dd>The timing advance value for this cell tower when available.</dd>
</dl>
</div>
<div class="section" id="connection-fields">
<h3>Connection Fields<a class="headerlink" href="#connection-fields" title="Permalink to this headline">¶</a></h3>
<p>Information about the data connection at the time of the observation.</p>
<p>This section might be extended in the future to include information
about the network speed or network latency timings.</p>
<dl class="docutils">
<dt>ip</dt>
<dd>The public IP address at the time the observation was taken.</dd>
</dl>
</div>
<div class="section" id="wifi-access-point-fields">
<h3>Wifi Access Point Fields<a class="headerlink" href="#wifi-access-point-fields" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>macAddress</dt>
<dd>The BSSID of the Wifi network. Hidden Wifi networks must not be collected.</dd>
<dt>radioType</dt>
<dd>The Wifi radio type, one of <cite>802.11a</cite>, <cite>802.11b</cite>, <cite>802.11g</cite>, <cite>802.11n</cite>,
<cite>802.11ac</cite>.</dd>
<dt>age</dt>
<dd>The number of milliseconds since this Wifi network was detected.</dd>
<dt>channel</dt>
<dd>The channel is a number specified by the IEEE which represents a
small band of frequencies.</dd>
<dt>frequency</dt>
<dd>The frequency in MHz of the channel over which the client is
communicating with the access point.</dd>
<dt>signalStrength</dt>
<dd>The received signal strength (RSSI) in dBm.</dd>
<dt>signalToNoiseRatio</dt>
<dd>The current signal to noise ratio measured in dB.</dd>
<dt>ssid</dt>
<dd>The SSID of the Wifi network. Wifi networks with a SSID ending in
<cite>_nomap</cite> must not be collected.</dd>
</dl>
</div>
</div>
<div class="section" id="response">
<h2>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h2>
<p>Successful requests return a HTTP 200 response with a body of an empty
JSON object.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geosubmit.html" class="btn btn-neutral float-right" title="Geosubmit (Deprecated)" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="region.html" class="btn btn-neutral" title="Region" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2015, Mozilla.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>